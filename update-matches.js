const { initializeApp } = require("firebase/app"); const { getFirestore, collection, query, where, getDocs } = require("firebase/firestore"); const { eventService } = require("./src/services/event.service"); const firebaseConfig = { apiKey: "AIzaSyBzV0eoozEXtna6ty-GIyf3-KXH_LZ65Ro", authDomain: "bingoapp-71d7b.firebaseapp.com", projectId: "bingoapp-71d7b", storageBucket: "bingoapp-71d7b.firebasestorage.app", messagingSenderId: "447133050390", appId: "1:447133050390:web:b51028bddc17271337f737", measurementId: "G-9EHBJ5P42C" }; const app = initializeApp(firebaseConfig); const db = getFirestore(app); async function updateAllMatches(eventId) { try { const eventParticipants = await eventService.getEventParticipants(eventId); console.log(`${eventParticipants.length} katılımcı bulundu`); for (const participant of eventParticipants) { console.log(`${participant.userId} için eşleşmeler güncelleniyor...`); await eventService.updateTaskMatches(participant.eventId, participant.userId, participant.surveyAnswers); } console.log("Tüm eşleşmeler güncellendi!"); } catch (error) { console.error("Hata:", error); } } // Etkinlik ID"sini parametre olarak alıyoruz const eventId = process.argv[2]; if (!eventId) { console.error("Lütfen bir etkinlik ID"si belirtin"); process.exit(1); } updateAllMatches(eventId);
